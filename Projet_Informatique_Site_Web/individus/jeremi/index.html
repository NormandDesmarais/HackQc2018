
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr">
    <head>
        <title>Jérémi Grenier-Berthiaume</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta charset="utf-8"/>
        <link rel="stylesheet" href="https://www.webdepot.umontreal.ca/Usagers/p1071435/MonDepotPublic/Acclimate/mystyle.css"/>
        <script src="js/minMenu.js" type="text/javascript"></script>
    </head>

    <body>
        <nav class="navBar" id="navBar">
            <ul>
               <li><a class="active" href="https://www.webdepot.umontreal.ca/Usagers/p1071435/MonDepotPublic/Acclimate/index.xhtml">Accueil</a></li><!-- Pour enlever l'espace...
            --><li><a href="https://www.webdepot.umontreal.ca/Usagers/p1071435/MonDepotPublic/Acclimate/plan.xhtml">Plan de travail</a></li><!-- https://css-tricks.com/fighting-the-space-between-inline-block-elements/
            --><li><a href="https://www.webdepot.umontreal.ca/Usagers/p1071435/MonDepotPublic/Acclimate/about.xhtml">À propos</a></li><!--
            --><li id="unique"><a href="javascript:void(0);" class="icon" onclick="showMenu()">&#9776;</a></li>
            </ul>
        </nav>

        <div onclick="hideMenu()">
            
            <h1>Projet Informatique (Été 2018)</h1>
            <h1><a href="https://www.webdepot.umontreal.ca/Usagers/p1071435/MonDepotPublic/Acclimate/index.xhtml?uniq=-lx1j15">Acclimate</a></h1>
            <h2 class="center">Jérémi Grenier-Berthiaume</h2>
            </br>
            <img alt="" src="https://www.webdepot.umontreal.ca/Usagers/p1071435/MonDepotPublic/Acclimate/images/app_image.png" class="center"/>
            </br>

            <h2>Rapport des contributions</h2>
            </br>

            <h3>Semaine 13 août</h3>
            <ul>
                <li><b>[WebApp]</b> Changement des URL des requêtes à l'API et adaptation de Angular pour que celles-ci demande des réponses en format JSON.</li>
                <li><b>[Android]</b> Rajout d'animations pour enrichir l'expérience des utilisateurs et rendre certaines fonctionalités plus évidentes.</li>
                <li><b>[Android]</b> Fix du crash occasionné par la demande de permission d'utiliser la Localisation GPS pour les API_Level 24+.</li>
                <li><b>[Android]</b> Implémentation de la méthode concrète permettant de receuillir le idToken à envoyer au serveur pour une requête authentifiée.</li>
                <li><b>[Android]</b> Refactoring pour les convention du nommage des packages.</li>
                <li><b>[Android]</b> Mise-à-jour de certaines librairies utilisées par l'application (dans le build.gradle).</li>
            </ul>

            <h3>Semaine 23 juillet</h3>
            <ul>
                <li><b>[Serveur]</b> Meilleure séparation entre l'appel de Spring et les démonstrations (utilisation de l'Admin SDK pour la vérification des JWT et les envoie de notifications).</li>
                <li><b>[Android]</b> Travail sur le UI: ajout d'éléments visuels pour orienter l'utilisateur, en plus de rendre l'expérience plus riche.</li>
                <li><b>[Design]</b> Création des artefacts pour générer le Logo de l'application Android.</li>
                <li><b>[Analyse]</b> Mise-à-jour du diagramme d'Activité pour les requêtes au serveur: il y avait un oubli par rapport aux requêtes qui peuvent bel et bien exister sans authentification (une requête tel que la demande des alertes, tout simplement).</li>
                <li><b>[Général]</b> Lecture par rapport aux limites en lien avec le nombre de librairies importées par projet.</li>
                <li><b>[Général]</b> Au lieu d'écrire "Backend", je vais désormais classer ces progrès comme étant au niveau "Serveur".</li>
            </ul>
            <img src="images/AppIcon.png" alt="App Icon" class="center"/>
            <br/>

            <h3>Semaine 16 juillet</h3>
            <blockquote>
                <u>Glossaire</u>:
                <ul>
                    <li><b><i>Firebase</i></b>: Ensemble de services offerts par Google pour les développeurs.</li>
                    <li><b><i>Admin SDK</i></b>: Permet l'accès à certaines fonctionnalités d'un API de Firebase (modifier le mot-de-passe d'un usager de la base de données d'authentification, par exemple). Authentifie l'application faisant les requêtes. L'intégration de l'Admin SDK doit se faire en privé (elle nécessite dans le code de l'information sensible que le public ne doit pas connaître).</li>
                    <li><b><i>FCM</i></b>: Firebase Cloud Messaging. Service facilitant l'envoie de Notifications à des appareils mobiles.</li>
                    <li><b><i>registrationToken</i></b>: Chaque appareil mobile unique ayant téléchargé l'application reçoit un 'registrationToken' unique. C'est ce token que l'on doit utiliser pour envoyer des notifications avec FCM.</li>
                    <li><b><i>OAuth 2</i></b>: Méthode d'authentification qui permet à un usager de s'authentifier sans nécessairement envoyer ses données sensibles (tel que son mot-de-passe) au serveur auquel il fait une requête.</li>
                    <li><b><i>idToken</i></b>: C'est le token utilisé par le protocole OAuth 2 pour authentifier la requête d'un usager (la requête est envoyée avec ce token).</li>
                    <li><b><i>JWT</i></b>: JSON Web Token. C'est un JSON encodé en base 64. Il possède la forme "XXX.YYY.ZZZ", où XXX est le 'header', YYY le 'payload' et ZZZ la 'signature'. Dans le cas de l'authentification via Firebase (où l'idToken est un JWT), le 'header' contient une clé publique de Google ainsi que l'algo utilisé pour la signature (soit RSA 256 bits, ou "RS256"), le 'payload' contient les informations en lien avec l'usager qui fait la requête (email, UID, etc.), et la 'signature' permet d'authentifier la requête.</li>
                    <li><b><i>UID</i></b>: Chaîne de caractère unique assignée à tout utilisateur s'authentifiant via Firebase à une application.</li>
                </ul>

                <u>Progrès</u>:
                <ul>
                    <li><b>[Android]</b> Intégration de "<i>Google SignIn</i>" et "<i>Acclimate (Email/Password) SignIn</i>" complétée via <i>Firebase</i>. <b>OAuth 2</b> est donc intégré à l'application. Le fruit de plusieurs jours de travail!</li>
                    <li><b>[Android]</b> Plusieurs heures passées à peaufiner le "activity_firebase.xml" (AuthUI) et le code lui étant relié pour permettre une meilleure expérience.</li>
                    <li><b>[Android]</b> <i>Clean up</i> du code laissé derrière par certaines expérimentations liées aux tests d'intégration de méthode d'authentification.</li>
                    <li><b>[Android]</b> Début d'un travail de Refactoring pour mieux séparer le code de l'Authentification: idéalement, chaque méthode de SignIn serait une Interface?</li>
                    <li><b>[Android]</b> Meilleur set up du "<i>Firebase Console</i>" et intégration des 2 autres admins du projet (invitation envoyée).</li>
                    <li><b>[Android]</b> Migration du projet Android sur BitBucket pour commencer à séparer les différentes branches du projet en différents 'repo'. Va permettre une synchronisation plus efficace des projets individuels puisqu'on n'aura pas de problèmes de "Merge/Pull" lorsqu'un projet n'étant pas relié au notre a été mis à jour (par exemple, le Backend vs Android).</li>
                    <li><b>[Android]</b> Suite à l'intégration du traitement Spring sur les JSON (par Olivier), j'ai retravaillé sur l'option de recherche d'adresse/location dans la carte. Cette option fonctionne désormais parfaitement.</li>
                    <li><b>[Android]</b> Refactor du code des méthodes "@Override onCreate" du package "MainActivities": simple déplacement de certaines sections dans des procédures privées afin de rendre le tout plus lisible.</li>
                    <li><b>[Android]</b> Début de travail sur la localisation GPS afin d'obtenir le plus rapidement possible la position de l'usager afin de pouvoir savoir où centrer la Map avant même que celui-ci n'y accède (présentement, on centre toujours sur Montréal).</li>
                    <li><b>[Android]</b> Importation de la librairie "Picasso" pour mieux traiter les images provenant d'une URI associée à un ImageView.</li>
                    <li><b>[Design]</b> Création d'un mini logo (24px) pour les ImageButton concernant Acclimate.</li>
                    <li><b>[Design]</b> Design du UI de base pour l'authentification.</li>
                    <li><b>[Backend]</b> Set up d'un Robot Moniteur pour commencer la migration du serveur en backend.</li>
                    <li><b>[Backend]</b> Intégration des notifications (utilise une liste de "registrationToken", qui chacun représente un appareil mobile)! (Plusieurs heures de recherche et information pour réussir cela.)</li>
                    <li><b>[Backend]</b> Intégration de la vérification de la signature des <i>JWT</i> (JSON Web Token) ainsi que de l'extraction des UID (ID unique associé à chaque utilisateur s'étant authentifié au moins une fois dans l'application). Les requêtes faites au serveur peuvent donc désormais être guaranties authentiques et intègre.</li>
                    <li><b>[Général]</b> Explication sommaire du système de "Tokens" de l'authentification par OAuth 2 aux membres de l'équipe.</li>
                    <li><b>[Sécurité]</b> Vu la nécessité de traiter de vérifier des signatures électroniques, il va falloir conserver un "secret" ou une "clé privée" quelque part dans le code du Backend. Ceci pose un problème de sécurité et j'ai donc proposé qu'on migre le Backend de GitHub vers BitBucket puisque ce dernier offre des 'repos' privés gratuitement (alors que GitHub ne nous permet de faire cela présentement que parce que nous sommes étudiants).</li>
                    <li><b>[Sécurité]</b> Selon mes recherches, l'unique faille de OAuth 2 est la possiblité du "replay attack". Il faudra trouver une manière d'intégrer un ID unique sur les requêtes, ou bien de s'assurer que le TimeStamp de création d'un idToken traité ne dépasse pas une certaine fenêtre de temps.</li>
                    <li><b>[Lecture]</b> Lecture sur la manière de cacher de l'information sensible dans le code du Backend. Quelques options s'offrent, mais il faut faire attention au "<i>reverse engineering</i>". J'approfondierai mes connaissances là-dessus au moment où on intégrera ces String dans le Backend.</li>
                    <li><b>[Lecture]</b> Lecture sur la manière de passer et interpréter les "<i>idToken</i>" générés par l'authentification d'OAuth 2.</li>
                    <li><b>[Lecture]</b> Lecture sur les différentes options qui s'offrent pour les notifications. Le problème actuel est la décision par rapport au "<i>minSDK</i>": il existe beaucoup de features intéressants pour les versions plus récentes d'Android, mais nous ne voudrions pas exclure une grande part du marché juste pour cela.</li>
                    <li><b>[Analyse]</b> Création de diagrammes d'activité pour le <i>flow</i> de l'authentification, d'une requête au serveur, et de l'ajout d'une <i>Monitored Zone</i>.</li>
                    <li><b>[Analyse]</b> Proposition d'une organisation de la structure de la Base de Données afin de permettre le déploiement plus efficace des notifications. Idée: semblable à un filtre de Bloom (mais sans hachage nécessaire), nous allons probablement utiliser des "tuiles" et classifier les Monitored Zones de chaque usager en fonction de quelles tuiles celles-ci touchent. Ainsi, lorsque le serveur va se demander à qui envoyer une notification, il y aura un tri plus rapide des options à considérer en fonction de dans quelle tuile se situe la Pin causerait l'envoie de notifications.</li>
                </ul>

                <u>Screenshots/Diagrammes</u>:<br/><br/>
                <img src="images/auth_screen2.png" alt="Screenshot 2" height="310" class="center"/>
                <img src="images/auth_screen3.png" alt="Screenshot 3" height="310" class="center"/>
                <img src="images/auth_screen4.png" alt="Screenshot 4" height="310" class="center"/>
                <img src="images/auth_screen1.png" alt="Screenshot 1" height="310" class="center"/>
                <br/> <img src="images/Auth_flow.png" alt="Diagramme d'activite pour le Auth_flow" width="710" class="center"/>
                <br/> <img src="images/add_MZ.png" alt="Diagramme d'activite pour l'ajout d'une Monitored Zone pour un utilisateur" width="710" class="center"/>
                <br/> <img src="images/Server_Request.png" alt="Diagramme d'activite pour le lancement d'une requête au serveur" width="710" class="center"/>
                <br/>
            </blockquote>
            

            <h3>Semaine 9 juillet</h3>
            <ul>
                <li><b>[WebApp]</b> Changement du default_pin de "Feu" à "Météo"</li>
                <li><b>[Général]</b> Le robot moniteur vérifie désormais toutes les 5 minutes</li>
            </ul>

            <h3>Semaine 2 juillet</h3>
            <ul>
                <li><b>[Android]</b> Plusieurs heures de recherches pour tenter d'intégrer un système d'authentification indépendant. (Considération d'implémentation manuelle, FireBase, Google SignIn et Spring OAuth.)</li>
                <li><b>[Android]</b> Recherche sur, et intégration des SharedPreference pour sauvegarder dans la mémoire interne certaines choses (les zones d'abonnements et les filtres, pour l'instant).</li>
                <li><b>[Android]</b> Refactor du code à plusieurs endroits. Certaines classes sont 25% plus courtes.</li>
                <li><b>[Android]</b> Réorganisation des classes dans des packages afin d'avoir une meilleure séparation.</li>
                <li><b>[Android]</b> Découverte et fix du bug qui empêchait d'utiliser InstantRun d'Android Studio: la vitesse de chargement pour des tests est désormais largement plus rapide.</li>
                <li><b>[Android]</b> Intégration d'une Activité de "Settings". Présentement encore incertain de son utilisation précise dans le futur.</li>
                <li><b>[Android]</b> Début du renommement du package du projet pour passer de "simpleTestApp" à "Acclimate".</li>
                <li><b>[Android]</b> Intégration des User Pins, pour les différencier des Pins officielles.</li>
                <li><b>[Android]</b> Localisation GPS intégrée. Fonctionne hors-ligne et en mode avion.</li>
                <li><b>[Android]</b> Intégration des "Marker Clusters" pour les bases de données statiques (les Pins dites "historiques") afin de réduire le lag lors du visionnement.</li>
                <li><b>[Android]</b> Intégration de plusieurs Threads: la Home Page fetch désormais les données en parallèle ce qui permet une initialisation plus rapide de l'app. De même pour le fetch des Pins historiques.</li>
                <li><b>[WebApp]</b> La WebApp est désormais déployée à l'adresse suivante: <a href="https://acclimate-web.herokuapp.com/">https://acclimate-web.herokuapp.com/</a></li>
                <li><b>[WebApp]</b> Corrections de certaines erreurs sur la classification des Pins.</li>
                <li><b>[WebApp]</b> Retouche sur les User Pins afin d'avoir une taille uniformisée.</li>
                <li><b>[Backend]</b> Commencement de l'intégration de QuartzScheduler au niveau du Server.</li>
                <li><b>[Général]</b> Mise en place d'un "robot moniteur" qui permet de garder le serveur ainsi que la WebApp toujours actifs (<a href="https://uptimerobot.com/">https://uptimerobot.com/</a>).</li>
            </ul>

            <h3>Semaine 25 juin</h3>
            <blockquote>Fin des examens intras. Rencontre avec l'équipe. J'ai retouché le site web (WebApp) pour corriger certaines erreurs d'interprétation des types de PIN et aussi pour intégrer les USER PIN. Il reste à décider de la grosseur de ces pins (sera fait plus tard).</blockquote>

            <h3>Semaine du 4 juin</h3>
            <blockquote>Recherches par rapport aux connections sécurisées: confirmation que la connection établie par l'application est sécurisée 
                en utilisant les protocoles du HTTPS (TLS/SSL). L'envoie d'informations sensibles (username+password bundle) via l'URL ne devrait 
                donc pas être une brèche de sécurité: seul le nom de domaine ne sera pas encrypté. Ce sera donc fort probablement 
                l'approche utilisée pour l'enregistrement et l'identification des usagers.</blockquote>
            <blockquote>Lecture par rapport aux Notifications, Data Storage, et Account Management System.</p></blockquote>

            <h3>Semaine du 21 mai</h3>
            <blockquote>Création du site web de l'équipe (affichage dynamique: accessible par téléphone cellulaire), organisation du GitHub en conséquence (nouveau dossier spécifique au site web pour ce cours), création du patron pour les pages individuelles des membres de l'équipe.</blockquote>
            <blockquote>Design pour différencier les Pins des alertes déclarées par des utilisateurs de celles provenant de BDD officielles (gouvernement).</blockquote>
            <img src="images/User_Pin.png" alt="User Pins" class="center"/>
            <br/>

            <h3>Semaine du 14 mai</h3>
            <blockquote>Rencontre d'équipe pour revisiter les progrès réalisés et élaborer un <a href="https://www.webdepot.umontreal.ca/Usagers/p1071435/MonDepotPublic/Acclimate/plan.xhtml">Plan de Travail</a> qui définit un peu mieux les objectifs, la répartition des tâches et le découpage des concepts.</blockquote>
            <br/>

            <h3>Semaine du 30 avril</h3>
            <blockquote>Recherche sur la manière de programmer des applications Android.</blockquote>
            <blockquote><i>Brainstorm</i> sur le concept du logiciel et la répartition des tâches.</blockquote>
            <blockquote>Participation au Hackhaton "HackQc 2018" sur les Données Ouvertes. Premier jet de prototype de Acclimate (qui a remporté la <a href="https://devpost.com/software/hackqc-remise">3e place</a>).</blockquote>
            <blockquote>Contributions personnelles (durant le Hackathon):
                <ul>
                    <li>Quelques décisions sur le design (police utilisée dans le logo, ajout de texte indicateur sous le logo de la carte sur l'Activity d'accueil, etc.).</li>
                    <li>Contribution pour le Parsing de la BDD « Historique ».</li>
                    <li>Apprentissage sur le fonctionnement des applications Android et leur développement.</li>
                    <li>Création du patron des <b>Activities</b> de l'application.</li>
                    <li>Implémentation du design proposé par Charles-Philippe Lepage dans le Frontend de l'application (travail avec les fichiers <b>XML</b> et le <b>Manifest</b>).</li>
                    <li>Implémentations mineures reliées au Backend (filtres d'affichage sur la carte, intégration d'un champ de recherche, affichage dans la page d'accueil du nombre de chaque alertes en fonction de leur type).</li>
                </ul>
            </blockquote>

            


            </br>
            </br>
            <footer>
                <img src="https://www.webdepot.umontreal.ca/Usagers/p1071435/MonDepotPublic/Acclimate/images/diro.png" alt="Département d'Informatique et de Recherche Opérationnelle"/>
            </footer>
        </div>
    </body>
</html>